<section data-markdown
    data-separator="^\n---\n$"
    data-separator-vertical=">>>$"
    data-vertical="^\n--\n">
</sction>

<style type="text/css">
    p { text-align: left; }
</style>

# プログラミングパラダイム
---
# 免責事項
ここで紹介する内容は新人向けに比較的よくつかわれるものに絞って説明しています。  
個々について詳細に説明しようとするとそれだけで本が書けるようなものばかりです。  
あくまでキーワードの紹介と思って興味を惹かれたものはぜひ調べてみてください。

---

# プログラミングパラダイムとは何か

--

## [wikipedia](https://ja.wikipedia.org/wiki/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%83%91%E3%83%A9%E3%83%80%E3%82%A4%E3%83%A0)
プログラミングパラダイムは、プログラマにプログラムの見方を与えるものと言える

--

## [ASCII.jpデジタル用語辞典](http://yougo.ascii.jp/caltar/%E3%83%91%E3%83%A9%E3%83%80%E3%82%A4%E3%83%A0)
方法論のこと。パソコン用語では、プログラミングにおける開発チームの中での共通の思考パターンを指す。

--

## [weblio](https://www.weblio.jp/content/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%83%91%E3%83%A9%E3%83%80%E3%82%A4%E3%83%A0)
プログラミングパラダイム (英: programming paradigm)とは、プログラミングにおけるパラダイムである

--

## つまり
プログラミングをするときの考え方です。  
この資料ではプログラミングにどんな種類があるかを説明していきます。

---

# 説明するパラダイム
--
## プログラムの構造
* 手続き型プログラミング
* オブジェクト指向プログラミング
* 関数型プログラミング
* アスペクト指向プログラミング
--
## 並列処理
* マルチスレッドプログラミング
* Future/Promise
* アクターモデル
--
## 処理の流れ
* フロー駆動型プログラミング
* イベント駆動型プログラミング

---

# プログラムの構造
* 手続き型プログラミング
* オブジェクト指向プログラミング
* 関数型プログラミング
* アスペクト指向プログラミング

---

## 手続き型プログラミング
ここではプログラムの構造を考えます。  
以下に簡単なコード片があります。

```python
def hello(name, age):
    print("私は%sです。%s才です。" % (name, age))

name = "成冨"
age = 31
hello(name, age)
```

このコードでは挨拶をする関数を定義し、名前、年齢を決めて関数を呼び出しています。
このように手続きを並べることでプログラムを作成することを手続き型プログラミングと呼びます。

--
## 代表的な手続き型プログラミング言語
大概のプログラミング言語
手続きが書けないプログラミング言語のほうが少数です。
--

## 問題点
手続きと手続きで使用するデータの関連付けを人間が行う必要がある。

```python
def hello(name, age):
    print("私は%sです。%s才です。" % (name, age))

name = "成冨"
age = 31
hello(name, age)
```

サンプルコードではnameとageが1つだけですが、これが2人3人と増えていったとき、果たして間違えずに管理できるでしょうか？
また、ここに機能を追加してほしいといわれたとき、もれなく修正することは可能でしょうか？
---

## オブジェクト指向プログラミング
オブジェクト指向プログラミングではプログラムで表現する対象を「データとその振る舞い」を一塊として「オブジェクト」として扱い、プログラムをオブジェクト同士のメッセージのやり取りで表現します。

--
サンプルとしてまたpythonのコードを挙げてみます

```python
class Human(object):
    def __init__(self, name, age):
        self.__name = name,
        self.__age = age

    def hello():
        print("私は%sです。%s才です。" % (
            self.__name, self.__age
            )
        )

naritomi = Human("成冨", 31)
naritomi.hello()
```
最初のコードに比べると長くなりましたが、
おそらく名前と年齢を取り違えることはなくなるでしょう
--
## クラスベースのオブジェクト指向
このコードでは挨拶ができて名前と年齢を持つオブジェクトを定義をしたうえで、その定義に基づいてオブジェクトを作成して挨拶をさせました。  
このオブジェクトの定義をクラス、実際に生成されたオブジェクトをインスタンスといいます。
現在主流となっているのはこのクラスベースのオブジェクト指向プログラミングです。

--
## 代表的なオブジェクト指向プログラミング言語
* Java
* Python
* Ruby
* C++
* etc

--
## 問題点
オブジェクト指向プログラミングではオブジェクト内部に状態を持たせることで状態の管理を簡単にしました。
しかし、プログラムが大規模化し処理が並列に行われるようになっていくと、オブジェクトが長期間生存し状態管理が難しい状況が生まれました。

---
## 関数型プログラミング
このパラダイムではプログラムは関数の組み合わせで表現されます。  
明確な定義はありませんが、多くの場合以下のような特徴を持つとされます。

* 関数が第一級オブジェクト
    * 高階関数(関数を引数にとったり返り値にしたりできる)
* 参照透過性
    * 入力で出力が一意に定まる
    * 副作用を持たない
* 状態を持たず変更されない不変なオブジェクト

--
## 関数が第一級オブジェクト
第一級オブジェクトとはJavaやPythonにおけるリテラルやクラスのように値として取り扱えるものを指します。
これらは関数の引数に渡したり返り値にしたり変数に保存したりできます。  
関数型言語では関数そのものがこの第一級オブジェクトとして取り扱われます。

--
```python
f = lambda a, b: a * 10 + b + 1
def g(c):
    return c + 2
h = g
i = lambda func, x: func(x) + 100
```
関数が第一級オブジェクトだとこんな感じのコードが書けます。

---
## アスペクト指向プログラミング
オブジェクト指向を補完するような考え方で、クラスをまたいで登場する関心事をうまく扱うための考え方です。

* ログ出力
* パフォーマンス計測
* リソース制限
* etc

--
pythonのデコレーターを使ったサンプルですが、この例ではメソッドの実行時間を計測する処理を処理本体から切り離して定義しています。

```python
def add_performance_log(func):
    def inner(*args, **kwargs):
        start = time.time()
        result = func(*args, **kwargs)
        print(time.time() - start)
        return result
    return inner

@add_performance_log
def hello():
    print('hello world')
@add_performance_log
def goodbye():
    print('goodbye world')
```
--
アスペクト指向の基本的な考え方は、このように汎用的に使われる機能を切り出して、必要な個所に挿入するというものです。
多くの場合アノテーションや依存性注入(DI)等で実現されます。
---
# 並列処理
* マルチスレッドプログラミング
* Future/Promise
* アクターモデル
---
## マルチスレッドプログラミング